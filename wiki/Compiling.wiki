#summary Compiling the OML source is easy
#labels compile,source

= Introduction =

A lot of people want to try out OML, but a public release isn't available yet so here you have the instructions on how to compile it yourself.

For a reference how to use the SVN look here:
http://internetducttape.com/2007/03/03/howto_google_code_hosting_subversion_tortoisesvn/


= Details =

Requirements
  * Visual Studio 2008 (the free version [http://www.microsoft.com/express/vcsharp/ Visual C# 2008 Express Edition] will also work)
  * Windows Installer 4.5 (http://www.microsoft.com/downloadS/details.aspx?familyid=5A58B56F-60B6-4412-95B9-54D056D6F9F4&displaylang=en). Required to install SQL Server in some cases.
  * Windows Powershell (required to install the SQL administration tools).
  * Microsoft SQL Server Express 2008 (http://www.microsoft.com/express/sql/download/). Download SQL Server 2008 Express with Tools.
  * NUNIT (http://www.nunit.org/index.php?p=download)
  * WIX 3.0 (wix.sourceforge.net)
  * Media Center SDK 5.3 (http://www.microsoft.com/downloads/details.aspx?FamilyID=A43EA0B7-B85F-4612-AA08-3BF128C5873E&displaylang=en)
  * Dxperience (http://www.devexpress.com/go/DevExpressDownload_DXperience.aspx)
    * Go to this page, http://www.devexpress.com/Products/Free/WebRegistration/ to sign up and get the tools needed for free. This is not a must, but else you will get a popup.  If you continue to have the popup return, you can follow the steps in this link, http://www.devexpress.com/Support/Center/KB/p/A705.aspx to get rid of the popup.



= Steps to setup your build environment: =

1) Install Visual Studio, Media Center SDK & NUNIT.

2) For SQL prerequisites, Install Windows Installer 4.5 & Windows Powershell


= Install SQL Server and create the database: =

1) Install SQL Server Express. To assist with the correct setup, there are 4 configuration scripts below the 'SQL Scripts' folder in the trunk source repository. Choose the most suitable for your requiments and 32/64 bit OS.

For example to install the x32 version with the admin tools, enter into a command prompt -

SQLEXPRWT_x86_ENU.exe /CONFIGURATIONFILE="c:\OML\OML\SQL Scripts\SQLConfigWithTools_x32.ini"

NOTE - The exact command will depend on the installation file downloaded from microsoft and the location of the ini files.

2) Under 'Microsoft SQL Server 2008' in the start menu, click on 'SQL Server Management Studio'.

3) Click 'Connect' at the login prompt should sucessfully log you in to SQL.

4) Right Hand Click on 'Databases' and select 'New Database'.

5) Enter 'OML' as the database name. Click 'OK' to create database.

6) In Windows Explorer, double click on 'Title Database.sql' under 'SQL Scripts' in the OML source folder stucture.

7) SQL Server Management Studio should now be showing the SQL creation script. Look for a database selection drop down on a Management Studio Toolbar. Change this from 'master' to 'OML'.

8) Click 'Execute' in the tool bar. The database should now be created ready for use.




= Steps to build the code: =

1) Compile the project using Visual Studio 2008 . Build -> Rebuild Solution

Note: This has to be done on a pc with Vista Media Center and the Media Center SDK 5.3 installed.

2) using a cmd prompt go into the Library\Setup (or Setup64) dir and run Build.bat

Note: This will require wix 3.0 to be installed.

3) run the installer located in the Library/bin/Release folder.

4) copy the OMLEngine\OML.config file to \program files\openmedialibrary and edit to your needs

5) run the OMLImporter.exe located in OMLImporter\bin\(debug or release)\ and follow its direction.  It will ask which importer to use (mymovies, dvd profiler and/or movie collectorz).  An open file dialog will appear, select your xml file.  This will take a moment to import your titles into oml.

At this point you should be good to go.  If your not seeing what something similar to what I posted the please post the files located in \program files\openmedialibrary\logs and your \program files\openmedialibrary\oml.dat file on our forums and we'll take a look at whats going on.  (Note, it wont be a high priority, but we'll get to it). 

= Troubleshooting =

*Q:* I get the following error compiling: Error 10 The command ""C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\..\..\..\Microsoft SDKs\Windows\v6.0\Bin\GacUtil.exe" /i "C:\OML\OMLEngine\bin\Release\OMLEngine.dll" /f" exited with code 3. OMLEngine

*A:* First try to run Visual Studio as an administrator. If that doesn't help, try to go to \program files\microsoft SDKs\Windows\ if the only folder there is 6.0A then open a command prompt and go to \program files\microsoft sdk\windows and input: mklink v6.0 v6.0a. Try compiling again, should help. 

NOTE:  DVD Profiler plugin will not currently produce anything that can "play" movies.  If you want to play movies for now I'd stick with the mymovies export file or movie collectorz untill DVD Profiler is fixed. The Movie Collectorz imported was tested with version 5.5 build 2.